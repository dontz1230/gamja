(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{245:function(e,t,r){var content=r(267);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(34).default)("0a18958c",content,!0,{sourceMap:!1})},266:function(e,t,r){"use strict";var d=r(245);r.n(d).a},267:function(e,t,r){(t=r(33)(!1)).push([e.i,".profile_address_container[data-v-3d66eb37]{display:flex;flex-direction:column;width:100%;justify-content:space-evenly}.profile_container .card[data-v-3d66eb37]{background:#fff}.address_block[data-v-3d66eb37]{width:80%;margin:auto;background:#fff;border-radius:6px;padding:16px 24px;align-items:center}.address_block[data-v-3d66eb37],.address_card[data-v-3d66eb37]{display:flex;flex-direction:column}.address_card[data-v-3d66eb37]{align-items:flex-start;margin-bottom:32px;justify-content:center;align-items:center;padding:12px 16px;width:100%;position:relative;flex-basis:300px}.address_card span[data-v-3d66eb37]{align-self:flex-end;color:#463688}.address_card span i[data-v-3d66eb37]{color:#463688}.address_card .address_row[data-v-3d66eb37]{width:100%}.address_card .address_row label[data-v-3d66eb37]{font-size:12px;text-align:left;font-weight:700;color:#c9d6df;margin-bottom:8px;width:100%}.address_card .address_row p[data-v-3d66eb37]{width:100%;color:#52616b;text-align:left;margin-bottom:.8rem}.address_card .address_row button[data-v-3d66eb37]{border-radius:8px;border:1px solid #3b7097;background:transparent;color:#3b7097;font-size:12px;padding:4px 12px}.address_card.addnew[data-v-3d66eb37]{cursor:pointer;transition:all .3s ease-in-out;background:transparent;border-style:dashed;font-size:1.5rem;color:grey}.address_card.addnew i[data-v-3d66eb37]{margin-bottom:12px;font-size:2rem;color:rgba(0,0,0,.125)}.address_card.addnew[data-v-3d66eb37]:hover{background:#fff;box-shadow:0 .5em 1em -.125em rgba(10,10,10,.25),0 0 0 1px rgba(10,10,10,.08)}",""]),e.exports=t},297:function(e,t,r){"use strict";r.r(t);r(42);var d=r(18),n={name:"Address",components:{},inject:["reload"],data:function(){return{user:"",country:"臺灣",fullName:"",street:"",county:"",dist:"",phone:"",deliverInstruction:"",securityCode:"",addresses:"",userID:"",email:"",userData:""}},asyncData:function(e){return Object(d.a)(regeneratorRuntime.mark((function t(){var r,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.app,e.params,t.prev=1,t.next=4,r.$api.getCountries().then((function(e){return e.data.countries}));case 4:return d=t.sent,t.abrupt("return",{countries:d});case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})))()},created:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getLS();case 2:return t.next=4,e.$api.getUser(e.email).then((function(e){return e.data.user}));case 4:return e.userData=t.sent,t.next=7,e.$api.getAddress(e.userID).then((function(e){return e.data.address}));case 7:e.addresses=t.sent;case 8:case"end":return t.stop()}}),t)})))()},methods:{getLS:function(){this.userID=JSON.parse(localStorage.getItem("UserInfo"))._id,this.email=JSON.parse(localStorage.getItem("UserInfo")).email},addAddress:function(){var data={user:this.userID,country:this.country,fullName:this.fullName,street:this.street,county:this.county,dist:this.dist,phone:this.phone,deliverInstruction:this.deliverInstruction,securityCode:this.securityCode};this.$api.postAddress(data).then((function(e){console.log(e.data)}))},editAddress:function(e){this.$router.push({path:"edit/".concat(e._id),query:e})},deleteAddress:function(e){this.$api.deleteAddress({user:this.userID,id:e}).then((function(e){e.data.success&&alert("成功刪除")})).catch((function(e){return alert("刪除失敗",e)}))},setDefaultAddress:function(e){this.$api.setDefaultAddress({user:this.userID,id:e}).then((function(e){e.data.success&&alert("成功設定")})).catch((function(e){return alert("設定失敗",e)}))}}},o=(r(266),r(32)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"index_container"},[r("TitleBox",{attrs:{title:"Profile"}}),e._v(" "),r("div",{staticClass:"profile_address_container"},[""!==e.userData?r("div",{staticClass:"profile_container"},[r("div",{staticClass:"address_card card"},[r("div",{staticClass:"address_row"},[r("label",[e._v("Name")]),e._v(" "),r("p",[e._v(e._s(e.userData.name))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Email")]),e._v(" "),r("p",[e._v(e._s(e.userData.email))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Contact Number")]),e._v(" "),r("p",[e._v(e._s(e.userData.phone))])]),e._v(" "),e.userData.address?r("div",{staticClass:"address_row"},[r("label",[e._v("Default Address")]),e._v(" "),r("p",[e._v(e._s(e.userData.address.country)+e._s(e.userData.address.county)+e._s(e.userData.address.dist)+e._s(e.userData.address.street))])]):e._e()])]):e._e(),e._v(" "),r("div",{staticClass:"address_card_container"},[r("div",{staticClass:"address_card card addnew",on:{click:function(t){return e.$router.push("address/add")}}},[r("i",{staticClass:"fas fa-plus"}),e._v("\n        Add new address\n      ")]),e._v(" "),e._l(e.addresses,(function(t){return r("div",{key:t._id,staticClass:"address_card card"},[r("span",[r("i",{staticClass:"fas fa-globe-asia"}),e._v("\n          "+e._s(t.country)+"\n        ")]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Address")]),e._v(" "),r("p",[e._v(e._s(t.county)+e._s(t.dist)+e._s(t.street))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Contact Name")]),e._v(" "),r("p",[e._v(e._s(t.fullName))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Contact Number")]),e._v(" "),r("p",[e._v(e._s(t.phone))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("label",[e._v("Deliver Instruction")]),e._v(" "),r("p",[e._v(e._s(t.deliverInstruction))])]),e._v(" "),r("div",{staticClass:"address_row"},[r("button",{on:{click:function(r){return e.editAddress(t)}}},[e._v("EDIT")]),e._v(" "),r("button",{on:{click:function(r){return e.setDefaultAddress(t._id)}}},[e._v("SET DEFAULT ADDRESS")]),e._v(" "),r("button",{on:{click:function(r){return e.deleteAddress(t._id)}}},[e._v("DELETE")])])])}))],2)])],1)}),[],!1,null,"3d66eb37",null);t.default=component.exports}}]);